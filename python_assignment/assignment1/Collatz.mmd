graph TD
    A["程序启动"] --> B["main() 函数"]
    B --> C["初始化数字列表"]
    C --> D["遍历处理数字"]
    D --> E["调用collatz_sequence(num)<br/>生成序列"]
    
    E --> F["初始化测试数字列表<br/>[7,27,103]"]
    F --> G{"n == 1?"}
    G -- 是 --> H["返回完整序列"]
    G -- 否 --> I{"n 是偶数?"}
    I -- 是 --> J["n = n // 2"]
    I -- 否 --> K["n = 3 * n + 1"]
    J & K --> L["将新 n 加入 sequence"]
    L --> G
    
    H --> M["计算序列长度<br/>且截取最后三个元素"]
    M --> N["打印 num 的序列长度<br/>最后三个数字"]
    N --> O{"是否遍历完所有测试数字?"}
    O -- 否 --> D
    O -- 是 --> P["调用plot_sequence(27)绘图"]
    P --> W["程序结束"]